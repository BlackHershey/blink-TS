# blink-TS
## Modeling the urge to blink

### Notebooks:  
**Average curves.ipynb**
   * Reads in subject discomfort and effort averages (output of "effort graphs") and creates a single group average curve. Compares the difference in the average and discomfort curves.  
   
**Comparing Models.ipynb**
   * Compared the three generated models (blink-timing, sawtooth and box) to the actual reported discomfort trial for every trial from each subject. Outputs are correlation values and root mean square error.  
   
**Sqrt Change in Discomfort In-between blinks (AVG & SD).ipynb**
   * Takes discomfort from time directly after blink until the time of next blink or trial ends. It plots the difference between the predicted and reported level of discomfort (Î”y = disc(t) - [a(log2(x+c) - log2(t0+c))] - disc(t0)).  Average and standard deviation are also plotted to observe patterns in the change in discomfort directly after a blink. Created separate graphs for the average control group and TS group responses.  
   
**Tic Model - Leading up to First Blink (Just Functions+last graphs).ipynb**
   * Creates multiple different .txt files from blink timing output created by the eye tracking computer program.  Blinks_Time function outputs how much time each subjects spent "in a blink" (with their eyes closed).
   * BlinkList function creates a binary .txt file for each subject to denote if the subject was blinking during the specified time frame (1) or not (0).
   * FirstBlink function identifies the first blink of each suppression trial for each subject.
   * Then there are multiple BeforeFirstBlink functions, for raw and scaled data, and for the control and TS groups, to be separated for analysis. This plots the discomfort (raw or scaled) for each subject leading up to the first blink of each trial (or end of the trial if no blink occurred during the 60 seconds). A moving average function was applied and then sigmoid, square root and log functions were applied to see which most closely represented the reported discomfort. Correlations and root mean square error were reported.

### Scripts/Functions/Libraries:
**Baseline Blinks.py**
   * Creates multiple different .txt files from the \_BaseBlinks output created by the eye tracking computer program (a list of each time frame where in a blink, as well as a binary output of whether the frame was during a blink).
   * Also outputs a "baseline blink rate" to report how much time each subject normally spends blinking at their baseline.  
   
**Effort Graphs.py**
   * Averages all 5 effort trials across each subject to create one average effort curve and one average discomfort curve. Also plotted each effort line and the average line.  
   
**resample_curves_and_average.py**
   * ADD ME  
   
**Resampling Data.py**
   * Resamples the time and discomfort ratings into uniform quarter-second bins and outputs each subject's new resampled ratings and blinks (as a fraction of the bin where eyes were closed) to a new .txt file.  
   
**Z standardized urges.py**
   * Standardizes the reported discomfort using the following formula: (z = (xi - x )/SD). Outputs it as a new .txt file for each subject's standardized discomfort.  

### Effort/Discomfort Rating visual stimulus:
**Java program - Rating12**

### Participant Data
Each participant should have the following three files:  

**\_Ratings.txt**
   * The ratings file generated during the discomfort task (discomfort of keeping one's eyes open). Contains all 5 trials of which were being rated simultaneously with blink suppression.  
   
**\_Effort.txt**
   * The ratings file generated by the "effort" task (the effort to keep one's eyes open). Contains all 5 trials of which were being rated simultaneously with blink suppression.  
   
**\_Data.txt**
   * The resulting file after the blink program has been run to identify which frames were in blinks. Identifies the time, what task (don't blink/OK to blink), the RMSE value that, through the use of setting a threshold, identifies the blink and "false positive" and "false negative" columns. These columns allowed for a manual check to see if the program had lost the eyes (due to movement or change in lighting). If the program did not catch a blink where one in fact occurred, a rater entered 1 in the "false negative" column.
